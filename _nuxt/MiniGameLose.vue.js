import{d as T,af as v,h as r,r as G,c as h,t as L,o as c,a as u,b as n,g as d,f as s,w as S,e as $,s as w,p as H,q as g,B as K,_ as N,z as A}from"./entry.PKrA3y6R.js";import{_ as z}from"./Preloader.vue.CEJmd39k.js";const C=""+globalThis.__publicAssetsURL("images/minigame/alarm_clock.webp"),x=""+globalThis.__publicAssetsURL("images/minigame/alarm_clock.png"),B=C,E={class:"bs-content"},W={class:"bs-content-image is-minigame-alarm-clock"},Z=n("picture",null,[n("source",{srcset:B,type:"image/webp"}),n("img",{src:x})],-1),P=["innerHTML"],U=["innerHTML"],D={class:"bs-content-buttons"},R=["disabled"],V={class:"minigame-button-replay"},j=["innerHTML"],q={class:"minigame-button-replay-timer"},F=["innerHTML"],Q=T({__name:"MiniGameLose",setup(I){const{$event:f}=g(),e=v(),o=r(),i=G(!1),M=()=>{r().trackEvent("minigame_puzzle_watch_youtube")},p=async()=>{e.sceneLoaded&&(i.value||(i.value=!0,await new Promise(t=>setTimeout(t,400)),await e.postStartDailyKeysMiniGame().then(t=>{w().useHapticFeedback("heavy"),e.showGamePage(),e.startGame(),f("bs:close"),r().trackEvent("minigame_puzzle_retry_success")}).catch(async t=>{H.promise({}).reject({title:g().$i18n.t("messages.oops"),duration:3e3}),r().trackEvent("minigame_puzzle_retry_error"),await K().postConfig()}).finally(()=>{setTimeout(()=>{i.value=!1},400)})))},k=h(()=>{var l,m,b;if(!e.dailyKeysMiniGame||(l=e.dailyKeysMiniGame)!=null&&l.remainSecondsToNextAttempt&&(((m=e.dailyKeysMiniGame)==null?void 0:m.remainSecondsToNextAttempt)<=3&&e.openPage(),((b=e.dailyKeysMiniGame)==null?void 0:b.remainSecondsToNextAttempt)<=0))return"00:00";const t=Math.floor(e.dailyKeysMiniGame.remainSecondsToNextAttempt%60),_=Math.floor(e.dailyKeysMiniGame.remainSecondsToNextAttempt/60%60),a=Math.floor(e.dailyKeysMiniGame.remainSecondsToNextAttempt/3600);return a>0?`${o.padWithZero(a)}:${o.padWithZero(_)}:${o.padWithZero(t)}`:`${o.padWithZero(_)}:${o.padWithZero(t)}`}),y=h(()=>{var t;return e.dailyKeysMiniGame&&((t=e.dailyKeysMiniGame)==null?void 0:t.remainSecondsToNextAttempt)>0});return L(()=>{r().trackEvent("minigame_puzzle_dialog_lose")}),(t,_)=>{const a=N,l=A,m=z;return c(),u("div",E,[n("div",W,[d(a,{name:"alarm-clock-glow"}),Z]),n("div",{class:"bs-content-title",innerHTML:t.$t("minigame.lose_title")},null,8,P),n("div",{class:"bs-content-description no-gap",innerHTML:t.$t("minigame.lose_description")},null,8,U),n("div",D,[d(l,{class:"bottom-sheet-button button button-primary button-default",to:s(e).dailyKeysMiniGame.youtubeUrl,onClick:M,target:"_blank",innerHTML:t.$t("buttons.watch_youtube_video")},null,8,["to","innerHTML"]),s(y)?(c(),u("button",{key:0,class:"button button-default button-dark",onClick:p,disabled:!s(i)&&s(y)},[n("div",V,[n("p",{innerHTML:t.$t("buttons.retry")},null,8,j),n("div",q,[d(a,{class:"is-16",name:"alarm"}),n("p",null,S(s(k)),1)])])],8,R)):(c(),u("button",{key:1,class:"button button-primary button-default",onClick:p},[!s(i)&&s(e).sceneLoaded?(c(),u("span",{key:0,innerHTML:t.$t("buttons.retry")},null,8,F)):(c(),$(m,{key:1}))]))])])}}});export{Q as _};
