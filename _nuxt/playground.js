import{d as C,ab as E,h as I,c as V,o as r,a as g,f as o,y as H,b as e,g as m,n as Y,w as T,_ as w,s as k,B as x,r as h,e as f,aa as M,F as A,G as K,D as P,H as z,v as J,ac as Q,ad as W,p as Z,q as $,z as ee,m as oe,af as ne,t as se,C as D}from"./entry.PKrA3y6R.js";import{_ as U}from"./Image.vue.ClQxnqaj.js";import{_ as j}from"./Preloader.vue.CEJmd39k.js";import{P as te,_ as re}from"./navigation.CvGbiWLJ.js";import{S as ae,a as ie,N as le,E as ce}from"./effect-fade.C-sU7EDq.js";const de=["promo"],me=["innerHTML"],pe={class:"playground-item-background"},ue={class:"playground-item-content"},_e=["innerHTML"],ge={class:"playground-item-footer"},ye=["innerHTML"],ve=C({__name:"Playground",props:{promo:{}},setup(L){const s=E(),c=I(),i=L,a=async()=>{c.trackEvent(`promo_playground_click_${i.promo.promoId}`),s.showPromoPage(i.promo)},l=V(()=>s.getReceiveKeysToday(i.promo.promoId)===i.promo.keysPerDay),y=V(()=>i.promo.promoId==="61308365-9d16-4040-8bb0-2f4a4c69074c"||i.promo.promoId==="dc128d28-c45b-411c-98ff-ac7726fbaea4");return(n,b)=>{const v=U,p=w;return r(),g("div",{class:"playground-item",onClick:a,promo:n.promo},[o(y)?(r(),g("div",{key:0,class:"badge is-style-1 is-playground-item",innerHTML:n.$t("messages.new")},null,8,me)):H("",!0),e("div",pe,[m(v,{image:n.promo.image.defaultUrl,compressed:n.promo.image.compressedUrl},null,8,["image","compressed"])]),e("div",ue,[e("div",{class:"playground-item-title",innerHTML:o(c).getLocalizedString(n.promo.title)},null,8,_e),e("div",ge,[(r(),g("div",{class:"playground-item-footer-left",key:n.promo.promoId},[m(p,{class:"key-icon",name:"key"}),e("span",{class:Y(["playground-item-footer-left-counter",o(l)?"is-done":""])},T(o(s).getReceiveKeysToday(n.promo.promoId))+"/"+T(n.promo.keysPerDay),3),e("span",{innerHTML:n.$t("playground.received")},null,8,ye)]))])])],8,de)}}}),he={class:"slider-onb-image has-border has-glow has-gradient"},fe={class:"slider-onb-info"},be={class:"slider-onb-info-image"},$e={class:"slider-onb-info-text"},ke=["innerHTML"],Pe=["innerHTML"],Le=["innerHTML"],Se={class:"slider-onb-button"},Me=C({__name:"PlayGroundOnboardingSlider",props:{promo:{},closeSlider:{type:Function}},setup(L){const s=I();k(),x();const c=[le,te,ce],i=h(null),a=h(!0),l=L,y=()=>{a.value=i.value.activeIndex!==i.value.slides.length-1},n=()=>{i.value.slideNext()},b=p=>{i.value=p},v=()=>{l.closeSlider()};return(p,t)=>{const u=w,_=U,S=re;return r(),f(S,null,{default:M(()=>[e("div",{class:"slider-onb-close is-playground",onClick:t[0]||(t[0]=(...d)=>l.closeSlider&&l.closeSlider(...d))},[m(u,{name:"close"})]),m(o(ae),{class:"slider-onb is-playground",loop:!1,effect:"fade",onSwiper:b,pagination:{clickable:!0},modules:c,onSlideChange:y},{default:M(()=>[(r(!0),g(A,null,K(p.promo.onboard,d=>(r(),f(o(ie),{class:"slider-onb-item"},{default:M(()=>[e("div",he,[e("div",null,[m(_,{image:d.image.defaultUrl,compressed:d.image.compressedUrl},null,8,["image","compressed"])])]),e("div",fe,[e("div",be,[m(_,{image:"/images/onboarding/hamster-img-01.png",compressed:"/images/onboarding/hamster-img-01.webp"})]),e("div",$e,[e("h3",{innerHTML:o(s).getLocalizedString(d.title)},null,8,ke),e("p",{innerHTML:o(s).getLocalizedString(d.description)},null,8,Pe)])])]),_:2},1024))),256))]),_:1}),P(e("div",{class:"slider-onb-next",onClick:t[1]||(t[1]=d=>n()),innerHTML:p.$t("buttons.next")},null,8,Le),[[z,o(a)]]),P(e("div",Se,[e("button",{class:"button button-primary",onClick:t[2]||(t[2]=d=>v())},T(p.$t("buttons.play")),1)],512),[[z,!o(a)]])]),_:1})}}}),He={class:"playground-partner"},Te={class:"playground-partner-input"},Ce=["placeholder"],Ie=["disabled"],we=["innerHTML"],Ue={class:"playground-partner-section"},De=["innerHTML"],Ee={class:"playground-partner-image"},Ne=["innerHTML"],Ge=["innerHTML"],Oe={class:"playground-partner-button"},Be=["innerHTML"],Fe=C({__name:"PartnerGame",setup(L){const s=E(),c=I(),i=k(),a=h(""),l=h(!1),y=h(!1);let n;const b=async()=>{a.value&&(l.value=!0,n=Z.promise({title:$().$i18n.t("messages.process_request")}),await s.postApplyPromocode(a.value).then(t=>{k().useHapticFeedback("heavy"),n==null||n.resolve({message:`${$().$i18n.t("messages.success")}`,duration:4e3}),c.trackEvent("promo_playground_redeem_success"),a.value=""}).catch(t=>{var _;const u=(_=t==null?void 0:t.data)==null?void 0:_.error_code;if(c.trackEvent("promo_playground_redeem_error"),k().useHapticFeedback("heavy"),u)switch(u){case"InvalidPromoCode":{n==null||n.reject($().$i18n.t("messages.INVALID_PROMOCODE"));break}case"MaxKeysReceived":{n==null||n.reject($().$i18n.t("messages.MAX_KEYS"));break}default:{n==null||n.reject($().$i18n.t("messages.INVALID_PROMOCODE"));break}}else n==null||n.reject($().$i18n.t("messages.oops"))}).finally(()=>{setTimeout(()=>{l.value=!1},400)}))};J(()=>{s.hidePromoPage()});const v=()=>{y.value=!0,c.trackEvent("promo_playground_click_onboarding"),i.bottom_sheet_close_visible=!1},p=()=>{y.value=!1,i.bottom_sheet_close_visible=!0};return(t,u)=>{var N,G,O,B,F;const _=w,S=j,d=U,q=ee,X=Me;return r(),g("div",He,[e("div",{class:"bottom-sheet-close",onClick:u[0]||(u[0]=R=>o(s).hidePromoPage())},[m(_,{name:"close"})]),e("div",Te,[P(e("input",{name:"promocode","onUpdate:modelValue":u[1]||(u[1]=R=>W(a)?a.value=R:null),placeholder:t.$t("playground.past_code")},null,8,Ce),[[Q,o(a)]]),e("button",{class:"button button-primary button-default",onClick:b,disabled:o(l)},[o(l)?(r(),f(S,{key:1})):(r(),g("span",{key:0,innerHTML:t.$t("promo.redeem_modal_redeem_button")},null,8,we))],8,Ie)]),e("div",Ue,[e("div",{class:"playground-onboard-button",onClick:v},[m(_,{name:"eyes"}),e("span",{innerHTML:t.$t("playground.watch_onboarding")},null,8,De)]),e("div",Ee,[m(d,{image:(G=(N=o(s).selectedPromo)==null?void 0:N.image)==null?void 0:G.defaultUrl,compressed:(B=(O=o(s).selectedPromo)==null?void 0:O.image)==null?void 0:B.compressedUrl},null,8,["image","compressed"])]),e("div",{class:"playground-partner-title",innerHTML:o(c).getLocalizedString(o(s).selectedPromo.title)},null,8,Ne),(r(),g("div",{class:"playground-partner-keys",key:((F=o(s).selectedPromo)==null?void 0:F.promoId)??"234"},[m(_,{class:"key-icon",name:"key"}),e("span",{innerHTML:t.$t("playground.keys_received_2",{current:o(s).getReceiveKeysToday(o(s).selectedPromo.promoId),max:o(s).selectedPromo.keysPerDay})},null,8,Ge)]))]),e("div",Oe,[m(q,{class:"button button-primary button-small",target:"_blank",to:o(s).selectedPromo.appUrl},{default:M(()=>[m(d,{image:o(s).selectedPromo.icon.defaultUrl,compressed:o(s).selectedPromo.icon.compressedUrl},null,8,["image","compressed"]),e("span",{innerHTML:t.$t("buttons.play")},null,8,Be)]),_:1},8,["to"])]),o(y)?(r(),f(X,{key:0,promo:o(s).selectedPromo,closeSlider:p},null,8,["promo"])):H("",!0)])}}}),Re={class:"main"},Ve={class:"inner playground"},ze={class:"playground-top"},Ae={class:"playground-top-left"},Ke=["innerHTML"],je=["innerHTML"],qe=["innerHTML"],Xe={class:"playground-top-right"},Ye={class:"playground-top-right-image"},xe={class:"playground-top-right-counter"},Je=e("div",{class:"playground-divider"},null,-1),Qe={class:"playground-games"},We=["innerHTML"],to=C({__name:"playground",setup(L){const s=oe(),c=E(),i=I();ne(),k();const a=h(!1);return h("All"),se(()=>{c.promos.length>0||(a.value=!0),c.postGetPromos().then(y=>{a.value=!1}).catch(y=>{a.value=!1,k().useHapticFeedback("heavy"),i.showErrorPush()})}),(l,y)=>{const n=w,b=U,v=j,p=ve,t=Fe,u=D("motion-slide-left"),_=D("motion-slide-right"),S=D("motion-pop");return r(),g("main",Re,[e("div",Ve,[e("div",ze,[P((r(),g("div",Ae,[e("div",{class:"playground-top-left-title",innerHTML:l.$t("playground.title")},null,8,Ke),e("div",{class:"playground-top-left-description",innerHTML:l.$t("playground.description_1")},null,8,je),e("div",{class:"playground-top-left-description",innerHTML:l.$t("playground.description_2")},null,8,qe)])),[[u]]),P((r(),g("div",Xe,[e("div",Ye,[m(n,{name:"glow"}),m(b,{image:"/images/minigame/key.png",compressed:"/images/minigame/key.webp"})]),e("div",xe,T(o(s).balanceKeys??0),1)])),[[_]])]),Je,e("div",Qe,[o(a)?(r(),f(v,{key:0})):H("",!0),(r(!0),g(A,null,K(o(c).promos,d=>P((r(),f(p,{promo:d,key:d.promoId},null,8,["promo"])),[[S]])),128))]),e("div",{class:"playground-footer",innerHTML:l.$t("playground.bottom_text")},null,8,We)]),o(c).showPromo?(r(),f(t,{key:0})):H("",!0)])}}});export{to as default};
